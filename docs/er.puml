@startuml

skinparam linetype ortho

entity "User" as User {
  user_id
  email
  name
  active
}

entity "House" as House {
  house_id
  user_id
  address
}

entity "Device" as Device {
  device_id
  house_id
  type_id
  manufacturer_id
  serial_number
  status
}


entity "Script" as Script {
  script_id
  house_id
  status
  steps
}

entity "ScriptStep" as ScriptStep {
  step_id
  step_order
  script_id
  device_id
  step_type
  step_params
}

entity "DeviceType" as DeviceType {
  type_id
  name
}

entity "Manufacturer (Производитель устройства)" as Manufacturer {
  manufacturer_id
  name
  api_params
}

entity "TelemetryData" as TelemetryData {
  device_id
  timestamp
  telemetry_name
  telemetry_value
}

User }|..|{ House
Device ||..o| House
Device ||..|| DeviceType
Device ||..|| TelemetryData
Device ||..|| Manufacturer
Script ||..|{ ScriptStep
Script }o..o{ House
Script }o..o{ DeviceType

@enduml
